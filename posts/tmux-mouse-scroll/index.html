<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>larissa | How to fix tmux mouse scrolling after 2.1 changes</title>
    <link rel="stylesheet" href="/stylesheet.css">
    <link rel="stylesheet" href="/coderay.css">
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Patua+One|Raleway:100,200,300,400,500' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <script src="/javascript.js" type="text/javascript" charset="utf-8"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-65130099-1', 'blog.larissareis.org');
      ga('send', 'pageview');

    </script>
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.8.0">
  </head>
  <body>
    <div id="content">
      <div id="header">
        <h1><a href="/">larissa reis</a></h1>
        <ul>
          <li><a href="/about/">About</a></li>
          <li><a href="/projects/">Projects</a></li>
          <li><a href="/archive/">Archive</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a title="feed" href=/feed.xml>Feed</a>
          </li>
        </ul>
      </div>
      <div id="main">
        

<h1>How to fix tmux mouse scrolling after 2.1 changes</h1>
<div class='post-header'>
  <h4>Posted on October 31, 2015</h4>
  
  <h5>Tags: <a href="/tag/tmux" rel="tag">tmux</a></h5>
</div>


<p>I updated tmux to the newest 2.1 version and surprise! my mouse configuration
stopped working. According to the
<a href="https://github.com/tmux/tmux/blob/master/CHANGES">changelog</a>, mouse mode was
rewritten and made a lot simpler. All those options for <code>mouse-{resize,select}</code>
and <code>mode-mouse</code> were thrown away and replaced by one <code>mouse</code> that turns on the
support for mouse inside tmux.</p>

<p>From the manual,</p>

<pre><code>mouse [on | off]  If on, tmux captures the mouse and
                  allows mouse events to be bound as
                  key bindings. See the MOUSE SUPPORT
                  section for details.
</code></pre>

<p>I didn’t want to do anything fancy, so just turning on mouse and using the
default bindings were enough to make mouse work again. There was only one little
problem: mouse scrolling was not working. Or rather, it worked only when I was
already inside copy-mode. Apparently the old behavior changed because people
couldn’t agree on how it should work, like how many lines should be skipped. So
now tmux guys decided to keep it simple and let people configure themselves.</p>

<p>I’m using the configuration suggested
<a href="https://www.reddit.com/r/tmux/comments/3paqoi/tmux_21_has_been_released/cw552qd">here</a>
to use the mouse scroll to automatically enter copy-mode to scroll back into
history and leave copy-mode when you’re back at the bottom again. It also passes
through the key press instead of entering copy-mode if there is an alternate
screen, like mutt or less, that will handle the key themselves. I thought that
scrolling half a page was too much so in my tmux.conf I used scroll-up to skip
only one line at a time instead:</p>

<pre><code># makes scroll work
bind-key -T root WheelUpPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; copy-mode -e; send-keys -M"
bind-key -T root WheelDownPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; send-keys -M"
bind-key -t vi-copy WheelUpPane scroll-up
bind-key -t vi-copy WheelDownPane scroll-down
</code></pre>

<p>There is actually a lot of interesting new features introduced for version 2.1,
it’s worth taking a look at the changelog.</p>



  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'larissareis';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


      </div>
      <div class="clear">
      </div>
      <div id='footer'>
        <ul class="social">
          <li>
            <a title="github" href="https://github.com/larissa" class="fa fa-github"></a>
          </li>
          <li>
            <a title="gitlab" href="https://gitlab.com/u/larissa" class="fa fa-git"></a>
          </li>
          <li>
            <a title="bitbucket" href="https://bitbucket.org/larissareis" class="fa fa-bitbucket"></a>
          </li>
          <li>
            <a title="linkedin" href="https://br.linkedin.com/in/reislarissa" class="fa fa-linkedin"></a>
          </li>
          <li>
            <a title="contact" href="javascript:void(0)" onclick="colivreShow();" class="fa fa-envelope"></a>
            <img id='colivre' class='colivre-none' src='/colivre.png'>
          </li>
        </ul>
        <p>
          ©2015, Larissa Reis. All Rights Reserved
        </p>
        <p>
          Powered by the awesomeness and simplicity of <a href="https://www.ruby-lang.org">Ruby</a> and <a href="http://nanoc.ws">Nanoc</a>.
        </p>
      </div>
    </div>
  </body>
</html>
